<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SymptoSense</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- React CDN -->
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

<style>
:root{
 --bg:linear-gradient(180deg,#0f2027,#203a43,#2c5364);
 --card:rgba(255,255,255,0.12);
 --text:#ffffff;
 --accent:#2ecc71;
 --muted:rgba(255,255,255,0.7);
}
.light{
 --bg:linear-gradient(180deg,#eef2f3,#d9e2ec);
 --card:rgba(255,255,255,0.85);
 --text:#111;
 --accent:#2da44e;
 --muted:#555;
}
body{
 margin:0;
 font-family:-apple-system,BlinkMacSystemFont;
 background:var(--bg);
 color:var(--text);
 transition:.4s;
}
.app{
 max-width:960px;
 margin:auto;
 padding:20px;
}
h1{text-align:center;}
.subtitle{text-align:center;color:var(--muted);margin-bottom:10px;}
.toggle{
 text-align:center;margin-bottom:14px;
}
.toggle button{
 background:var(--card);
 color:var(--text);
 border:none;
 padding:8px 16px;
 border-radius:20px;
 cursor:pointer;
}
.grid{
 display:grid;
 grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
 gap:12px;
 margin:20px 0;
}
.symptom{
 background:var(--card);
 backdrop-filter:blur(16px);
 border-radius:18px;
 padding:14px;
 text-align:center;
 cursor:pointer;
 transition:.3s;
}
.symptom:hover{transform:scale(1.05);}
.symptom.active{background:rgba(46,204,113,.7);}
input.other{
 width:100%;
 padding:14px;
 border-radius:14px;
 border:none;
 margin-bottom:14px;
}
button.main{
 width:100%;
 padding:16px;
 border-radius:20px;
 border:none;
 background:linear-gradient(135deg,var(--accent),#27ae60);
 color:white;
 font-size:16px;
 cursor:pointer;
}
.dashboard{
 display:grid;
 grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
 gap:12px;
 margin-top:18px;
}
.dash{
 background:var(--card);
 backdrop-filter:blur(14px);
 border-radius:18px;
 padding:14px;
 text-align:center;
}
.card{
 background:var(--card);
 backdrop-filter:blur(14px);
 border-radius:20px;
 padding:16px;
 margin-top:14px;
}
.bar{
 background:rgba(255,255,255,.3);
 height:10px;
 border-radius:10px;
 overflow:hidden;
}
.bar div{
 height:100%;
 background:var(--accent);
}
.download{
 background:#1f6feb;
 margin-top:16px;
}
.footer{
 text-align:center;
 font-size:.8rem;
 color:var(--muted);
 margin-top:18px;
}
.loader{text-align:center;margin-top:14px;}
</style>
</head>

<body>
<div id="root"></div>

<script type="text/babel">
const {useState,useEffect}=React;

function App(){
const DATA={
 "ü§ß Common Cold":["cough","runny_nose","sore_throat","sneezing"],
 "ü§í Flu":["fever","cough","headache","fatigue","body_pain"],
 "ü§ï Migraine":["headache","nausea"],
 "ü§ß Allergy":["itching","sneezing"],
 "üòÆ‚Äçüí® Asthma":["cough","wheezing","shortness_of_breath"],
 "ü§¢ Food Poisoning":["vomiting","diarrhea","stomach_pain"],
 "ü¶ü Dengue":["high_fever","headache","joint_pain"],
 "ü¶† Typhoid":["fever","weakness","stomach_pain"]
};

const precautions={
 "ü§ß Common Cold":"Rest, fluids, warm food, avoid cold exposure.",
 "ü§í Flu":"Hydration, paracetamol, rest, consult doctor if severe.",
 "ü§ï Migraine":"Avoid triggers, rest in dark room, hydrate.",
 "ü§ß Allergy":"Avoid allergens, antihistamines if prescribed.",
 "üòÆ‚Äçüí® Asthma":"Avoid dust/smoke, use inhaler if prescribed.",
 "ü§¢ Food Poisoning":"ORS, hydration, avoid outside food.",
 "ü¶ü Dengue":"Rest, fluids, avoid NSAIDs, medical supervision.",
 "ü¶† Typhoid":"Antibiotics (doctor), clean food & water."
};

const severity={
 "ü§ß Common Cold":0.3,"ü§í Flu":0.6,"ü§ï Migraine":0.4,"ü§ß Allergy":0.3,
 "üòÆ‚Äçüí® Asthma":0.7,"ü§¢ Food Poisoning":0.6,"ü¶ü Dengue":0.9,"ü¶† Typhoid":0.8
};

const ML_WEIGHTS={
 fever:1.3,cough:1.1,headache:1.0,fatigue:1.2,
 sneezing:0.6,runny_nose:0.6,nausea:1.0,
 vomiting:1.1,diarrhea:1.1,wheezing:1.4,
 shortness_of_breath:1.6,joint_pain:1.3
};

const emoji={
 cough:"üò∑",fever:"üî•",headache:"ü§ï",fatigue:"üò¥",
 sneezing:"ü§ß",vomiting:"ü§¢",diarrhea:"üöΩ",
 wheezing:"üòÆ‚Äçüí®",joint_pain:"ü¶¥",runny_nose:"ü§ß",
 shortness_of_breath:"üòÆ‚Äçüí®",stomach_pain:"ü§¢"
};

const refine=(base,m)=>{
 let s=0;m.forEach(x=>s+=ML_WEIGHTS[x]||1);
 return Math.min(base*(s/m.length),100);
};

const all=[...new Set(Object.values(DATA).flat())];
const [sel,setSel]=useState([]);
const [other,setOther]=useState("");
const [res,setRes]=useState([]);
const [load,setLoad]=useState(false);
const [theme,setTheme]=useState(false);

const toggle=s=>setSel(p=>p.includes(s)?p.filter(x=>x!==s):[...p,s]);

const analyze=()=>{
 let s=[...sel];
 if(other.trim())s.push(...other.split(",").map(x=>x.trim()));
 if(!s.length)return alert("Select symptoms");
 setLoad(true);
 setTimeout(()=>{
  let out=[];
  for(let d in DATA){
   let m=s.filter(x=>DATA[d].includes(x));
   if(m.length){
    let base=(m.length/DATA[d].length)*100;
    let ref=refine(base,m);
    let risk=ref*severity[d];
    out.push({d,base,ref,risk,m});
   }
  }
  out.sort((a,b)=>b.risk-a.risk);
  setRes(out);setLoad(false);
 },900);
};

const download=()=>{
 let now=new Date();
 let r=`SymptoSense Medical Report\n\nDate: ${now.toLocaleDateString()}\nTime: ${now.toLocaleTimeString()}\n\nSelected Symptoms:\n`;
 sel.forEach(s=>r+=`- ${s}\n`);
 r+="\n--------------------------------\n\n";
 res.slice(0,3).forEach(x=>{
  let level=x.risk>=50?"High":x.risk>=25?"Medium":"Low";
  r+=`Disease: ${x.d}\nRisk: ${x.risk.toFixed(1)}% (${level})\n`;
  r+=`Symptoms Matched: ${x.m.length}/${DATA[x.d].length}\n`;
  r+=`Precautions: ${precautions[x.d]}\n\n`;
 });
 r+="‚ö†Ô∏è Awareness only. Consult a medical professional.";
 let b=new Blob([r],{type:"text/plain"});
 let a=document.createElement("a");
 a.href=URL.createObjectURL(b);
 a.download="SymptoSense_Report.txt";
 a.click();
};

return(
<div className={theme?"light app":"app"}>
<h1>üß† SymptoSense</h1>
<div className="subtitle">Smart Symptom Risk Analysis</div>

<div className="toggle">
<button onClick={()=>setTheme(!theme)}>üåô / ‚òÄÔ∏è Toggle Theme</button>
</div>

<div className="grid">
{all.map(s=>(
<div key={s} className={"symptom "+(sel.includes(s)?"active":"")}
onClick={()=>toggle(s)}>
{emoji[s]||"üíä"} {s.replace("_"," ")}
</div>
))}
</div>

<input className="other" placeholder="Other symptoms"
value={other} onChange={e=>setOther(e.target.value)}/>

<button className="main" onClick={analyze}>Analyze Symptoms</button>
{load && <div className="loader">Analyzing‚Ä¶</div>}

{res.length>0 &&
<div className="dashboard">
<div className="dash">üßÆ<br/>{sel.length}<br/>Symptoms</div>
<div className="dash">ü©∫<br/>{res[0].d}<br/>Top Match</div>
<div className="dash">‚ö†Ô∏è<br/>{res[0].risk>50?"High":res[0].risk>25?"Medium":"Low"}<br/>Risk</div>
<div className="dash">ü§ñ<br/>ML Refined</div>
</div>
}

{res.slice(0,3).map(x=>(
<div className="card" key={x.d}>
<h3>{x.d}</h3>
<p>Risk: {x.risk.toFixed(1)}%</p>
<p>Matched Symptoms: {x.m.length}/{DATA[x.d].length}</p>
<div className="bar"><div style={{width:Math.min(x.risk,100)+"%"}}></div></div>
</div>
))}

{res.length>0 &&
<button className="main download" onClick={download}>
üì• Download Detailed Medical Report
</button>
}

<div className="footer">‚ö†Ô∏è Not a medical diagnosis</div>
</div>
);
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>